@section breadcrumb {
    <div class="container-fluid">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb my-0 ms-2">
                <li class="breadcrumb-item">
                    <!-- if breadcrumb is single-->
                    <span>Home</span>
                </li>
                <li class="breadcrumb-item active"><span>Dashboard</span></li>
            </ol>
        </nav>
    </div>
}


@{
    ViewBag.Title = "MoriiCoffee";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    var nds = ViewBag.nds;
    var ndsQty = ViewBag.ndsQty;
    var ctspsQty = ViewBag.ctspsQty;
    var tongTienHD = ViewBag.tongTienHD;
    var hdsQty = ViewBag.hdsQty;
    var doanhThuOnline = ViewBag.doanhThuOnline;
    var doanhThuTrucTiep = ViewBag.doanhThuTrucTiep;

    //Doanh thu tháng
    var doanhThuThang7 = ViewBag.doanhThuThang7;
    var doanhThuThang8 = ViewBag.doanhThuThang8;
    var doanhThuThang9 = ViewBag.doanhThuThang9;
    var doanhThuThang10 = ViewBag.doanhThuThang10;
    var doanhThuThang11 = ViewBag.doanhThuThang11;
    var doanhThuThang12 = ViewBag.doanhThuThang12;


}


<div class="body flex-grow-1 px-3">

    <div class="container-lg">
        <div class="row">
            <h3 id="doanhThuThang7" style="margin:0; padding:0; display:none;">@doanhThuThang7</h3>
            <h3 id="doanhThuThang8" style="margin:0; padding:0; display:none;">@doanhThuThang8</h3>
            <h3 id="doanhThuThang9" style="margin:0; padding:0; display:none;">@doanhThuThang9</h3>
            <h3 id="doanhThuThang10" style="margin:0; padding:0; display:none;">@doanhThuThang10</h3>
            <h3 id="doanhThuThang11" style="margin:0; padding:0; display:none;">@doanhThuThang11</h3>
            <h3 id="doanhThuThang12" style="margin:0; padding:0; display:none;">@doanhThuThang12</h3>
            <div class="col-sm-6 col-lg-3">
                <div class="card mb-4 text-white bg-primary">
                    <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                        <div>

                            <div class="fs-4 fw-semibold">
                                @ndsQty <span class="fs-6 fw-normal">

                                </span>
                            </div>
                            <div>Người Dùng</div>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-transparent text-white p-0" type="button" data-coreui-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg class="icon">
                                    <use xlink:href="~/Assets/Admin/vendors/core-ui/icons/svg/free.svg#cil-options"></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
                        <canvas class="chart" id="card-chart1" height="70"></canvas>
                    </div>
                </div>
            </div>
            <!-- /.col-->
            <div class="col-sm-6 col-lg-3">
                <div class="card mb-4 text-white bg-info">
                    <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                        <div>
                            <div class="fs-4 fw-semibold">
                                @ctspsQty <span class="fs-6 fw-normal">

                                </span>
                            </div>
                            <div>Sản Phẩm</div>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-transparent text-white p-0" type="button" data-coreui-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg class="icon">
                                    <use xlink:href="~/Assets/Admin/vendors/core-ui/icons/svg/free.svg#cil-options"></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
                        <canvas class="chart" id="card-chart2" height="70"></canvas>
                    </div>
                </div>
            </div>
            <!-- /.col-->
            <div class="col-sm-6 col-lg-3">
                <div class="card mb-4 text-white bg-warning">
                    <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                        <div>
                            <div>
                                <div class="fs-4 fw-semibold">
                                    @hdsQty
                                </div>
                                <div>Đơn Mua</div>
                            </div>


                        </div>
                        <div class="dropdown">
                            <button class="btn btn-transparent text-white p-0" type="button" data-coreui-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg class="icon">
                                    <use xlink:href="~/Assets/Admin/vendors/core-ui/icons/svg/free.svg#cil-options"></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="c-chart-wrapper mt-3" style="height:70px;">
                        <canvas class="chart" id="card-chart3" height="70"></canvas>
                    </div>

                </div>
            </div>
            <!-- /.col-->
            <div class="col-sm-6 col-lg-3">
                <div class="card mb-4 text-white bg-danger">
                    <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                        <div>
                            @if (tongTienHD > 1000000)
                            {
                                tongTienHD = tongTienHD / 1000000;
                                <div class="fs-4 fw-semibold">
                                    @(tongTienHD)M
                                </div>

                            }
                            else
                            {
                                tongTienHD = tongTienHD / 1000;
                                <div class="fs-4 fw-semibold">
                                    @(tongTienHD)K
                                </div>
                            }
                            <div>Doanh Thu</div>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-transparent text-white p-0" type="button" data-coreui-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg class="icon">
                                    <use xlink:href="~/Assets/Admin/vendors/core-ui/icons/svg/free.svg#cil-options"></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
                        <canvas class="chart" id="card-chart4" height="70"></canvas>
                    </div>
                </div>
            </div>
            <!-- /.col-->
        </div>
        <!-- /.row-->
        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h4 class="card-title mb-0">Biểu Đồ Doanh Thu</h4>
                        <div class="small text-medium-emphasis">Thắng 7 - Tháng 12 2022</div>
                    </div>
                    <div class="btn-toolbar d-none d-md-block" role="toolbar" aria-label="Toolbar with buttons">
                        <div class="btn-group btn-group-toggle mx-3" data-coreui-toggle="buttons">
                            <input class="btn-check" id="option1" type="radio" name="options" autocomplete="off">
                            <label class="btn btn-outline-secondary"> Line </label>
                            <input class="btn-check" id="option2" type="radio" name="options" autocomplete="off" checked="">
                            <label class="btn btn-outline-secondary active"> Bar </label>
                            <input class="btn-check" id="option3" type="radio" name="options" autocomplete="off">
                            <label class="btn btn-outline-secondary"> Pie </label>
                        </div>
                    </div>
                </div>
                <div>
                    <canvas id="myChart"></canvas>
                </div>

            </div>

        </div>

        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h4 class="card-title mb-0">Biểu Đồ Doanh Thu</h4>
                        <div class="small text-medium-emphasis">Mua Hàng Online - Mua Hàng Trực Tiếp</div>
                    </div>
                    <div class="btn-toolbar d-none d-md-block" role="toolbar" aria-label="Toolbar with buttons">
                        <div class="btn-group btn-group-toggle mx-3" data-coreui-toggle="buttons">
                            <input class="btn-check" id="option1" type="radio" name="options" autocomplete="off">
                            <label class="btn btn-outline-secondary"> Bar</label>
                            <input class="btn-check" id="option2" type="radio" name="options" autocomplete="off" checked="">
                            <label class="btn btn-outline-secondary active"> Pie</label>
                            <input class="btn-check" id="option3" type="radio" name="options" autocomplete="off">
                            <label class="btn btn-outline-secondary"> Doughnut</label>
                        </div>
                    </div>
                </div>
                @*<div class="c-chart-wrapper" style="height:300px;margin-top:40px;">
            <canvas class="chart" id="main-chart" height="300"></canvas>

        </div>*@
                <p style="margin: 0; padding: 0; display:none;" id="online">@doanhThuOnline</p>
                <p style="margin: 0; padding: 0; display:none;" id="tructiep">@doanhThuTrucTiep</p>

                <div class="c-chart-wrapper onlineTrucTiepChart" data-doanhThuOnline="@doanhThuOnline" style="display:flex; justify-content:center; align-items:center; height:500px;margin-top:40px;">
                    <canvas id="onlineTrucTiepChart"></canvas>
                </div>

            </div>

        </div>

        <!-- /.row-->
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('myChart');
    var doanhThuThang7 = + document.getElementById('doanhThuThang7').textContent;
    var doanhThuThang8 = + document.getElementById('doanhThuThang8').textContent;
    var doanhThuThang9 = + document.getElementById('doanhThuThang9').textContent;
    var doanhThuThang10 = + document.getElementById('doanhThuThang10').textContent;
    var doanhThuThang11 = + document.getElementById('doanhThuThang11').textContent;
    var doanhThuThang12 = + document.getElementById('doanhThuThang12').textContent;

  new Chart(ctx, {
      type: 'bar',
    data: {
      labels: ['Tháng 7 ', 'Tháng 8', 'Tháng 9 ', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
      datasets: [{
          label: 'Doanh Thu',

          data: [doanhThuThang7, doanhThuThang8, doanhThuThang9, doanhThuThang10, doanhThuThang11, doanhThuThang12],
        borderWidth: 1
      }]
    },
      options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

    

</script>

<script>
    const online = document.getElementById('online');
    var tienOnline = online.textContent;
    const tructiep = document.getElementById('tructiep');
    var tienTrucTiep = tructiep.textContent;


    const onlineTrucTiepChart = document.getElementById('onlineTrucTiepChart');
    new Chart(onlineTrucTiepChart, {
        type: 'pie',
        data: {
            labels: ['Mua Hàng Online', 'Mua Hàng Trực Tiếp'],
            datasets: [{
                label: 'Doanh Thu',

                data: [tienOnline, tienTrucTiep],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>


